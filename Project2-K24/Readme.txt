Ευστάθιος Χατζηλοΐζος - sdi1800212
Project1 - K24 Unix System Programming

Μέρος Α’.

Compilation: make
Παράδειγμα: ./vaccineMonitor -c inputFile -b 1000

Στο πρόγραμμα του μέρους Α΄ εκτός από τις skip list και το bloom filter τα οποία και
ζητούνται, έχουν αναπτυχθεί μία σειρά από δομές οι οποίες στοχεύουν στην όσο το δυνατό
καλύτερη ταχύτητα αναζήτησης σε συνδυασμό με την οικονομία μνήμης.
Οι κύριες πληροφορίες των citizen μπαίνουν σε πίνακα κατακερματισμού. Τα ονόματα των
χωρών καθώς και οι πληθυσμοί της κάθε ηλικιακής ομάδας μπάινει σε ένα country list.
Τα ονόματα των ιών μαζί με δείκτες προς τις skip list εμβολιασμένων και μη εμβολιασμένων
σε δυαδικό δέντρο αναζήτησης. Τα ονόματα των ιών στις εγγραφές του πίνακα κατακερματισμού
προσπελαύνονται μέσω δεικτών στους κόμβους του δυαδικού δέντρου αναζήτησης.
Ένα αξιοπρόσεκτο τέχνασμα που χρησιμοποιήθηκε είναι η εξαγωγή ενός πίνακα δεικτών ιών
προς τους κόμβους του δέντρου. Αυτό επιτυγχάνεται με κλήση αναδρομικής συνάρτησης
αφού γίνει η εισαγωγή των citizen. Η τεχνική αυτή στην ουσία δεν ξοδεύει ιδιαίτερη
μνήμη (μιλάμε για πίνακα δεικτών) ενώ παράλληλα προσφέρει μια σειριακή προσπέλαση
στους ιούς όταν τη χρειαστούμε. Έτσι όταν θέλουμε να προσπελάσουμε για παράδειγμα
τη skip list ενός συγκεκριμένου ιού το κάνουμε μέσα από το δέντρο για λόγους
ταχύτητας, ενώ όταν θέλουμε να προσπελάσουμε τις skip list όλων των ιών, το κάνουμε
μέσα από τον πίνακα αποφεύγοντας την αναδρομή. Σημειώνουμε ότι εάν στην πορεία ο χρήστης
μέσα από το μενού εισάγει νέο χρήστη μέσω του οποίου εισάγεται νέος ιός, ο πίνακας ενημερώνεται.
Όλα τα εισαγόμενα του χρήστη ελέγχονται διεξοδικά. Υλοποιήθηκαν 8 από τις 9 εντολές
του μενού, ενώ ακόμα και αυτή που δεν υλοποιήθηκε (VaccinateNow) αναγνωρίζεται και σπάει στα πεδία
της. 

Μέρος Β’.

Παράδειγμα: ./testFile.sh diseases.txt countries.txt 10000 0

To script του μέρους B’ ελέγχει κατά σειρά και εμφανίζει μηνύματα σφάλματος στα εξής:
α) Αν το πλήθος των ορισμάτων είναι μικρότερο του 4
β) Αν το πλήθος των ορισμάτων είναι μεγαλύτερο του 4
γ) Αν το αρχείο με τους ιούς αποτυγχάνει να ανοίξει
δ) Αν το αρχείο με τις χώρες αποτυγχάνει να ανοίξει
ε) Αν το πλήθος των γραμμών που δίνεται σαν όρισμα  δεν είναι θετικός ακέραιος
στ) Αν ο αριθμός που καθορίζει αν θα έχουμε ή όχι διπλά citizen id δεν είναι ακέραιος
ζ) Αν το αρχείο με τους ιούς δεν περιέχει γραμμές
η) Αν το αρχείο με τις χώρες δεν περιέχει γραμμές.
Από εκεί και κάτω το script χωρίζει δύο περιπτώσεις. 
Στην πρώτη περίπτωση απαγορεύονται οι διπλές τιμές citizen id. Σε αυτήν την περίπτωση
διατηρούμε έναν πίνακα με σημαίες επιλεγμένων citizen id. Ο πίνακας αυτός έχει μήκος
10.000. Στην πρώτη θέση αντιστοιχεί το citizen id 0, στη δεύτερη θέση αντιστοιχεί το
citizen id 1 κ.ο.κ. Κάθε φορά που επιλέγεται ένα citizen id σηκώνουμε την αντίστοιχη
σημαία. Αν η τυχαία επιλογή μας ρίξει πάνω σε ένα citizen id που έχει ήδη επιλεγεί,
σαρώνουμε προς τα δεξιά τον πίνακα μέχρι να βρούμε το πρώτο citizen id που δεν έχει
επιλεγεί. Αν η σάρωση μας φτάσει μέχρι το τέλος του πίνακα και δεν έχει βρεθεί
citizen id που δεν έχει ήδη επιλεγεί, η σάρωση συνεχίζει ξεκινώντας πάλι από την πρώτη
θέση του πίνακα. 
Στην δεύτερη περίπτωση είναι επιθυμητές κάποιες διπλές τιμές citizen id. Για να είμαστε
σίγουροι ότι θα υπάρχει τουλάχιστον μια διπλή τιμή, διατηρούμε το πρώτο citizen id
και ως δεύτερο. Από εκεί και πέρα έχουμε μία δεύτερη μεταβλητή που ανά 100 εισαγωγές
κρατά το citizen id που εισήχθη και 99 εισαγωγές μετά το επαναεισάγει. Αυτό σημαίνει
ότι ανά 100 εισαγωγές θα έχουμε τουλάχιστον μία διπλή τιμή citizen id. Βέβαια μπορεί
να έχουμε κι άλλες που θα προκύψουν τυχαία.
Στο κομμάτι του εμβολιασμού για να είναι πιο αληθοφανές το script, επιλέγουμε με
πιθανότητα 25% να είναι εμβολιασμένο ένα άτομο αν είναι κάτω των 20 ετών, με πιθανότητα
50% να είναι εμβολιασμένο ένα άτομο αν είναι από 20 μέχρι 50 ετών και με πιθανότητα 75%
να είναι εμβολιασμένο ένα άτομο αν είναι άνω των 50 ετών. Η ηλικία επιλέγεται τυχαία
στο εύρος 1-120. Για τις μέρες και τους μήνες ακολουθούνται οι συμβάσεις του 1-30 και
1-12 ενώ τα έτη πάλι για λόγους αληθοφάνειας επιλέγονται ανάμεσα στις τιμές 2020 και 2021.
Οι ιοί και οι χώρες επιλέγονται από τις τιμές των αρχείων αφού πρωτίστως έχουν αποθηκευτεί
σε σχετικούς πίνακες.
